<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../d2l-inputs/d2l-input-text.html">

<dom-module id="d2l-multi-select-input-text">
	<template strip-whitespace>
		<style>
			:host {
				display: flex;
				flex-direction: column;
			}

			d2l-input-text {
				width: 100%;
				padding-top: 0.5rem;
			}
		</style>

		<d2l-multi-select-input id="d2l-multi-select-input">
			<slot></slot>
			<d2l-input-text
				on-keydown="_onKeyDown"
				placeholder$="[[placeholder]]"
				slot="input"
				type$="[[type]]"
				value="{{value}}"
			></d2l-input-text>
		</d2l-multi-select-input>

	</template>
	<script>
		/**
		 * `<d2l-multi-select-input-text>`
		 * Polymer-based web component for D2L multi-select-input-text
		 * @demo demo/index.hmtl
		 */
		class D2LMultiSelectInputText extends Polymer.Element {
			static get is() { return 'd2l-multi-select-input-text'; }
			static get properties() {
				return {
					/**
					* These properties are used by d2l-input-text
					*/
					placeholder: {
						type: String,
					},
					type: {
						type: String,
						value: 'text'
					},
					value: {
						type: String,
					}
				};
			}
			constructor() {
				super();
			}

			_onKeyDown(event) {
				if (event.keyCode === 13 && this.value) {
					this.$['d2l-multi-select-input'].addItem(this.value, this);
					this.value = '';
				}
			}
		}
		customElements.define(D2LMultiSelectInputText.is, D2LMultiSelectInputText);
	</script>
</dom-module>
